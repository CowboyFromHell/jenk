plugins {
	id "com.moowork.node" version "1.3.1"
	//id "com.github.mgk.gradle.s3" version "1.5.1"
}




node {
	download = true
}



// task uploadNew(type: Exec){
// 	commandLine './aws_upload.sh'
// }


task zip(type: Zip){
//	doLast {
		from ('.') {
			include "*"
			include "bin/**"
			include "data/**"
			include "node_modules/**"
			include "routes/**"
			include "views/**"
			include "public/**"

		}
		destinationDir(file("dist"))
		baseName "trains"
	}
//}




task build



//build.dependsOn uploadNew
build.dependsOn zip
zip.dependsOn npm_build
//build.dependsOn npm_build
npm_build.dependsOn npm_install
npm_build.dependsOn npm_update
npm_build.dependsOn npm_test

